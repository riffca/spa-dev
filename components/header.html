<header class="sticky top-0">
	<div data-component="logo"></div>
	<div class="flex gap-2">
		<a href="#profile">Profile</a>
		<a href="#lazy">lazy</a>
	</div>
	<div>
		<input class="text-gray-500" data-header-input />
	</div>

	<div data-component="button">
		 <div>Ass</div>
	</div>

	<div class="header-auth">
		<button data-component="button"><div>Log out</div></button>
		<button data-component="button" data-get-list><div>Get list</div></button>
	</div>

	<div data-slot></div>
</header>


<script>
	function checkTargetParent(element, attributeName){
		if(element.hasAttribute(attributeName)) return true
	    if(!element.parentElement) return false
	    const hasAttribute = element.parentElement.hasAttribute(attributeName)
	    if(hasAttribute) return true
	    return checkTargetParent(element.parentElement,attributeName)
	}

		const InterHeader = $spa.bindElement(`[data-init=${CSS.escape(document.currentScript.id)}]`,{
			loaded: false,
			profile: null,
			text: null,
			async loadProfile(){
				const response = await Promise.resolve([{name: 'one'}])
				InterHeader.loaded = true
				InterHeader.profile = JSON.stringify(response)
			},

			async getDrinks(){
				const url = 'https://the-cocktail-db.p.rapidapi.com/filter.php?i=Gin';
				const options = {
					method: 'GET',
					headers: {
						'X-RapidAPI-Key': 'SIGN-UP-FOR-KEY',
						'X-RapidAPI-Host': 'the-cocktail-db.p.rapidapi.com'
					}
				};

				try {
					const response = await fetch(url, options);
					const result = await response.text();
					console.log(result);
				} catch (error) {
					console.error(error);
				}

			},
			async click(event){
				if(checkTargetParent(event.target,'data-get-list')){
					InterHeader.getDrinks()
				}
			},

		}, 	
		{ 
			update(prop,value) {
				if(prop === 'text') {
					const div = InterHeader.lib.target.querySelector('button')
					div.hidden = false
				}
			}

		})

		InterHeader.text = 10

		$spa.initComponent({
			name: 'header',
			attrs: (key, value, target)=>{
				if(key === 'data-text') {
					console.log(value)
					target.querySelector('input').value = value
				}
			},
			node: InterHeader.lib.target
		}, true)

		setTimeout(()=>{
			InterHeader.text = '18'
		},2000)

		const input = InterHeader.lib.target.querySelector(['[data-header-input]'])

		$spa.addEventListener(input, 'input',(event)=>{
			InterHeader.text = event.target.value
		})
</script>
<style>
	
	header {
		padding: 1rem;
		background: green;
		color: white;
		display: flex;
		justify-content: space-between;
	}
</style>