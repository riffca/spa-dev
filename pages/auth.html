<div class="flex bg-black  items-start justify-center bg-grey-200">
	<div class="p-12 text-white gap-4 flex flex-col">
		<app-title data-show="shownTitle">
			Authorization
		</app-title>
		<div class="text-black flex flex-col gap-4">
			<app-input  data-class="classes.email" data-model="credentials.email">
				<div class="py-2" data-show="errors.email">{errors.email}</div>
			</app-input>
			<app-input data-class="classes.password" data-model="credentials.password">
				<div class="py-2" data-show="errors.password">{errors.password}</div>
			</app-input>	
		</div>
		<app-button-action data-click="onButtonClick"><span>Log in</span></app-button-action>
	</div>
<div>

<script>
$spa.initCustomElement({
	name: 'page-auth',
	attrs: ['credentials', 'errors', 'classes'],
})

const { element, proxy } = $spa.getRoots($componentId)

proxy.credentials = {
	email: 'ssta',
	password: 'asr',
}
proxy.errors = {}
proxy.classes = {}


proxy.shownTitle = ()=>{
	return !Object.keys(proxy.errors).length  
}

$spa.watch('credentials', (value)=> {
	validate(value)
})

function validate(value){
	const errors = {}
	const classes = {}
	const { password, email} = proxy.credentials

	if(password?.length < 5) {
		errors.password = 'min length 5'
		classes.password = 'text-red-300'

	}
	if(email?.length < 5) {
		errors.email = 'min length 5'
		classes.email = 'text-red-300'

	}
	proxy.errors = errors
	proxy.classes = classes
}


function onButtonClick(){
	validate(proxy.credentials)
}

</script>